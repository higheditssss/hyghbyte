<!DOCTYPE html>
<html lang="ro">

<head>
  <meta charset="UTF-8" />
  <title>HYGHBYTE // Game Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>

<header class="hb-header">
  <div>
    <span class="hb-logo-main">HYGHBYTE</span>
    <span class="hb-logo-sub">GAME VAULT</span>
  </div>

  <div class="hb-header-right">
    <a href="https://highstatss.vercel.app/" target="_blank" class="hb-kick-btn">HIGHSTATS</a>
    <button id="caseBtn" class="hb-random-btn">üéÅ Open Case</button>
  </div>
</header>

<main class="hb-main">

  <!-- FEATURED SLIDER -->
  <section class="featured-section">
    <h2 class="featured-title">Featured Games</h2>

    <% if (featuredGames.length === 0) { %>
      <p style="opacity:.7; font-size:14px;">Nu existƒÉ jocuri √Æn Featured.</p>
    <% } else { %>

    <div class="featured-slider">
      <button id="featured-prev" class="featured-arrow left">‚ùÆ</button>

      <div id="featured-container">
        <% featuredGames.forEach((g, idx) => { %>
          <div class="featured-slide <%= idx === 0 ? 'active' : '' %>"
               style="--bg:url('<%= g.imageUrl %>')">

            <img src="<%= g.imageUrl %>" class="featured-big-img">

            <div class="featured-right">
              <h3><%= g.title %></h3>

              <% if (g.genres) { %>
                <p class="featured-genres"><%= g.genres %></p>
              <% } %>

              <a href="<%= g.playUrl %>" class="featured-play-btn" target="_blank">
                ‚ñ∂ JoacƒÉ acum
              </a>
            </div>

          </div>
        <% }) %>
      </div>

      <button id="featured-next" class="featured-arrow right">‚ùØ</button>
    </div>

    <% } %>
  </section>



  <!-- PAGE LAYOUT -->
  <div class="hb-layout">
    <aside class="hb-sidebar">
      <div class="hb-sidebar-title">Library</div>

      <button class="hb-sidebar-item is-active" data-filter="all">
        <span class="hb-sidebar-dot all"></span> Toate jocurile
      </button>

      <button class="hb-sidebar-item" data-filter="steam">
        <span class="hb-sidebar-dot steam"></span> Steam
      </button>

      <button class="hb-sidebar-item" data-filter="itch">
        <span class="hb-sidebar-dot itch"></span> itch.io
      </button>
    </aside>


    <!-- GAME GRID -->
    <section class="hb-content">
      <div class="hb-grid">

        <% games.forEach(g => { %>
        <article class="hb-card" data-source="<%= g.source %>">
          <div class="hb-card-image-wrap">
            <img src="<%= g.imageUrl %>" class="hb-card-image">
          </div>

          <div class="hb-card-body">
            <h3 class="hb-card-title"><%= g.title %></h3>

            <% if (g.genres) { %>
              <p class="hb-card-genres"><%= g.genres %></p>
            <% } %>

            <div class="hb-card-bottom">
              <a href="<%= g.playUrl %>" target="_blank" class="hb-button-primary">
                ‚ñ∂ JoacƒÉ
              </a>

              <% if (g.source === 'steam') { %>
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/83/Steam_icon_logo.svg" class="hb-source-icon">
              <% } else if (g.source === 'itch') { %>
                <img src="https://static-00.iconduck.com/assets.00/itch-io-icon-2048x2048-7q3p8x7n.png" class="hb-source-icon">
              <% } %>
            </div>
          </div>
        </article>
        <% }) %>

      </div>
    </section>
  </div>

</main>

<footer class="hb-footer">
  HYGHBYTE 2025 ‚Äî Not affiliated with Steam or itch.io.
</footer>


<!-- ------------------------------ -->
<!-- RANDOM GAME POPUP (NEW SYSTEM) -->
<!-- ------------------------------ -->

<div id="casePopup" class="popup hidden">
  <div class="popup-box">

    <!-- LEFT IMAGE -->
    <div class="popup-left">
      <img id="popupImg" src="" alt="Game" />
    </div>

    <!-- RIGHT PANEL -->
    <div class="popup-right">

      <h2 id="popupTitle">Game Title</h2>
      <p id="popupGenres" class="popup-genres"></p>

      <div id="popupBadge" class="popup-badge hidden"></div>

      <div class="popup-buttons">
        <a id="popupPlay" href="#" target="_blank" class="popup-play-btn">‚ñ∂ JoacƒÉ</a>
        <button id="popupClose" class="popup-close-btn">√énchide</button>
      </div>

    </div>

  </div>
</div>



<!-- ############################ -->
<!-- ######### JS CODE ######### -->
<!-- ############################ -->

<script>
/* ------------------------------
   FEATURED SLIDER
------------------------------ */
const slides = document.querySelectorAll(".featured-slide");
let index = 0;

function showSlide(i) {
  slides.forEach(s => s.classList.remove("active"));
  slides[i].classList.add("active");
}

if (slides.length > 0) {
  document.getElementById("featured-prev").onclick = () => {
    index = (index - 1 + slides.length) % slides.length;
    showSlide(index);
  };
  document.getElementById("featured-next").onclick = () => {
    index = (index + 1) % slides.length;
    showSlide(index);
  };
}
</script>


<script>
/* ------------------------------
   RANDOM GAME POPUP
------------------------------ */
const allGames = <%- JSON.stringify(games) %>;
const caseBtn = document.getElementById("caseBtn");

const popup = document.getElementById("casePopup");
const popupImg = document.getElementById("popupImg");
const popupTitle = document.getElementById("popupTitle");
const popupGenres = document.getElementById("popupGenres");
const popupPlay = document.getElementById("popupPlay");
const popupBadge = document.getElementById("popupBadge");
const popupClose = document.getElementById("popupClose");

function openCase() {
  if (!allGames.length) return;

  const g = allGames[Math.floor(Math.random() * allGames.length)];

  popupImg.src = g.imageUrl;
  popupTitle.textContent = g.title;
  popupGenres.textContent = g.genres || "";
  popupPlay.href = g.playUrl;

  if (g.badge) {
    popupBadge.textContent = g.badge;
    popupBadge.classList.remove("hidden");
  } else {
    popupBadge.classList.add("hidden");
  }

  popup.classList.remove("hidden");
}

popupClose.onclick = () => popup.classList.add("hidden");

caseBtn.addEventListener("click", openCase);
</script>

</body>
</html>
