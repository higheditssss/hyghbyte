<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>HYGHBYTE â€” Admin Panel</title>
  <link rel="stylesheet" href="/admin.css">
</head>
<body>

<header class="admin-header">
  <h1>HYGHBYTE â€” Admin Panel</h1>
  <a class="logout-btn" href="/admin-logout">Logout</a>
</header>

<section class="admin-section">
  <h2>AdaugÄƒ Joc</h2>

  <form method="POST" action="/admin-add" id="addGameForm">

    <select name="type" id="typeSelect">
      <option value="steam">Steam</option>
      <option value="manual">Manual / itch.io</option>
    </select>

    <input type="text" name="steamId" id="steamId" placeholder="Steam App ID">

    <input type="text" name="title" id="title" placeholder="Titlu (manual)"
           class="manual-field" style="display:none">

    <input type="text" name="genres" id="genres" placeholder="Genuri (FPS, etc)"
           class="manual-field" style="display:none">

    <input type="text" name="link" id="link" placeholder="Link joc"
           class="manual-field" style="display:none">

    <input type="text" name="imageUrl" id="imageUrl" placeholder="URL pozÄƒ"
           class="manual-field" style="display:none">

    <label class="featured-check">
      <input type="checkbox" name="featured">
      â­ Featured
    </label>

    <button type="submit" class="add-btn">+ AdaugÄƒ joc</button>
  </form>
</section>

<section class="admin-section">
  <h2>Jocuri existente</h2>

  <table class="admin-table">
    <tr>
      <th>ID</th>
      <th>Titlu</th>
      <th>Feat</th>
      <th>Vizibil</th>
      <th>Edit</th>
      <th>Stergere</th>
    </tr>

    <% games.forEach(g => { %>
    <tr>
      <td><%= g.id %></td>
      <td><%= g.title %></td>
      <td><%= g.featured ? "â­" : "" %></td>
      <td><%= g.visible ? "ğŸ‘" : "ğŸš«" %></td>
      <td><a href="/admin-edit/<%= g.id %>" class="edit-btn">âœï¸</a></td>
      <td><a href="/admin-delete/<%= g.id %>" class="delete-btn">ğŸ—‘ï¸</a></td>
    </tr>
    <% }) %>
  </table>
</section>

<script>
// Show/Hide inputs when switching Steam / Manual
const typeSelect = document.getElementById("typeSelect");
const manualFields = document.querySelectorAll(".manual-field");
const steamId = document.getElementById("steamId");

typeSelect.addEventListener("change", () => {
  if (typeSelect.value === "steam") {
    manualFields.forEach(f => f.style.display = "none");
    steamId.style.display = "inline-block";
  } else {
    manualFields.forEach(f => f.style.display = "inline-block");
    steamId.style.display = "none";
  }
});

// Auto-fetch Steam title & other fields
document.getElementById("addGameForm").addEventListener("submit", (e) => {
  if (typeSelect.value === "steam" && !steamId.value.trim()) {
    e.preventDefault();
    alert("Introdu un Steam App ID");
  }
});
</script>

</body>
</html>
