<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>HYGHBYTE Admin</title>
  <link rel="stylesheet" href="/admin.css" />
  <script>
    function updateSource() {
      const val = document.getElementById("sourceSelect").value;
      document.querySelector(".steam-only").style.display =
        val === "steam" ? "block" : "none";
      document.querySelector(".itch-only").style.display =
        val === "itch" ? "block" : "none";
    }
  </script>
</head>

<body>

<h1>Admin Panel</h1>

<!-- ADD GAME -->
<form action="/addGame" method="POST" class="admin-form">

  <label>Titlu:</label>
  <input name="title" required>

  <label>Genuri:</label>
  <input name="genres">

  <label>Imagine URL:</label>
  <input name="imageUrl" required>

  <label>Play URL (manual doar):</label>
  <input name="playUrl">

  <label>Sursa:</label>
  <select name="source" id="sourceSelect" onchange="updateSource()">
    <option value="steam">Steam</option>
    <option value="itch">itch.io</option>
  </select>

  <!-- ONLY STEAM -->
  <div class="steam-only">
    <label>Steam ID:</label>
    <input name="steamId" placeholder="Ex: 730">
  </div>

  <!-- ONLY ITCH -->
  <div class="itch-only" style="display:none;">
    <label>itch.io Link:</label>
    <input name="itchLink" placeholder="https://itch.io/...">
  </div>

  <button>Adaugă joc</button>
</form>

<hr>

<h2>Lista jocuri</h2>

<form action="/updateFeatured" method="POST">
  <div class="game-list">

    <% games.forEach(g => { %>
      <div class="game-box">
        <img src="<%= g.imageUrl %>">
        <h3><%= g.title %></h3>

        <label>
          <input type="checkbox" name="featured" value="<%= g.id %>"
            <%= g.featured ? "checked" : "" %> >
          Featured
        </label>

        <button formaction="/deleteGame/<%= g.id %>" formmethod="POST" class="delete-btn">
          Șterge
        </button>
      </div>
    <% }) %>

  </div>

  <button class="save-btn">Salvează Featured</button>
</form>

</body>
</html>
