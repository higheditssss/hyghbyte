<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Admin Panel ğŸ®</title>

<style>
    body {
        background: #0d0d0d;
        color: #fff;
        font-family: Arial, sans-serif;
        padding: 25px;
    }
    h1, h2 { margin-bottom: 12px; }
    input, button, select {
        width: 100%;
        padding: 12px;
        margin: 6px 0;
        border-radius: 8px;
        border: none;
        font-size: 15px;
    }
    button {
        background: #e50914;
        color: white;
        font-weight: 700;
        cursor: pointer;
        transition: .2s;
    }
    button:hover { background: #b20710; }
    .game-box {
        background: #151515;
        padding: 12px;
        border-radius: 10px;
        margin: 10px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .delete-btn {
        width: auto;
        padding: 6px 14px;
        background: #8b0000;
        font-size: 13px;
    }
    .delete-btn:hover { background: #a60000 }
    .section {
        background: #111;
        padding: 18px;
        border-radius: 14px;
        margin-bottom: 35px;
    }
</style>

<script>
function switchPlatform() {
    const platform = document.getElementById("platform").value;
    document.getElementById("steamFields").style.display = (platform === "steam") ? "block" : "none";
    document.getElementById("manualFields").style.display = (platform === "manual") ? "block" : "none";
}
</script>

</head>
<body>

<h1>Admin Panel ğŸ›</h1>

<!-- ADD GAME -->
<div class="section">
    <h2>AdaugÄƒ joc nou ğŸ®</h2>

    <form method="POST" action="/admin/add?token=<%= token %>">

        <select id="platform" name="platform" onchange="switchPlatform()" required>
            <option value="steam">Steam (auto-fetch)</option>
            <option value="manual">Manual (Itch.io / altele)</option>
        </select>

        <!-- Steam -->
        <div id="steamFields">
            <input type="number" name="steamId" placeholder="Steam AppID (ex: 620980)">
        </div>

        <!-- Manual -->
        <div id="manualFields" style="display:none;">
            <input type="text" name="title" placeholder="Nume joc">
            <input type="text" name="genres" placeholder="Genuri (ex: Horror, Indie)">
            <input type="text" name="imageUrl" placeholder="URL pozÄƒ joc">
            <input type="text" name="link" placeholder="Link joc">
        </div>

        <button type="submit">ğŸ’¾ SalveazÄƒ joc</button>
    </form>
</div>

<!-- FEATURED -->
<div class="section">
    <h2>SeteazÄƒ Featured â­</h2>
    <form method="POST" action="/admin/feature?token=<%= token %>">
        <select name="id" required>
            <% games.forEach(g => { %>
                <option value="<%= g.id %>"><%= g.title %></option>
            <% }) %>
        </select>
        <button type="submit">â­ AdaugÄƒ la Featured</button>
    </form>
</div>

<!-- GAME LIST -->
<div class="section">
    <h2>Jocuri existente ğŸ•¹</h2>

    <% if (games.length === 0) { %>
        <p style="opacity:.6;">Nu existÄƒ jocuri Ã®ncÄƒ ğŸ‘€</p>
    <% } %>

    <% games.forEach(g => { %>
    <div class="game-box">
        <div>
            <strong><%= g.title %></strong><br>
            <span style="opacity:.7;"><%= g.genres %></span>
        </div>

        <form method="POST" action="/admin/delete?token=<%= token %>">
            <input type="hidden" name="id" value="<%= g.id %>">
            <button class="delete-btn">ğŸ—‘ï¸ È˜terge</button>
        </form>
    </div>
    <% }) %>

</div>

</body>
</html>
